---
id: 4.1.x
title: '📒 v4.1'
---

<div class="wwads-cn wwads-horizontal" data-id="317"></div><br/>

## v4.1.0.10

- 动作链`type()`方法增加`interval`参数
- Page 对象加上几种浏览器状态
- 增加`Settings.suffixes_list_path`，用于设置离线域名后缀列表文件
- 支持离线运行
- DownloadKit 指定 2.0.5 版本，`download()`的`goal_path`改为`save_path`
- 优化`css_path`
- 优化等待新标签页逻辑
- 优化关闭标签页逻辑
- 接管来自 selenium 和 playwright 的浏览器时忽略无头设置
- 修复下载路径设置问题
- 修复`new_tab()`时浏览器关闭导致的卡住
- 修复一个 headers 设置问题
- 修复多线程关闭标签页时可能报错问题

---

## v4.1.0.7

- `DataPacket`对象增加`request.params`属性
- `DataPacket`对象 headers 补充完整
- `MixTab`和`WebPage`的`s_ele()`补上`timeout`参数
- `wait.has_rect()`、`wait.covered()`成功时返回调用者
- 元素列表切片时也返回列表对象
- 修复`new_tab()`访客模式下不输入`url`参数时报错问题
- 修复`get_tab()`找不到指定标签页对象时报错问题
- 修复某些网站`back()`后卡住问题
- 修复`xpath`属性指向元素不唯一问题

---

## v4.1.0.5

- 引入`Chromium`对象用于代表浏览器
- `WebPageTab`改名为`MixTab`
- `SessionPage`、`ChromiumPage`和`WebPage`初始化时删除`timeout`提示，以后会废弃
- `activate_tab()`取代`set.tab_to_front()`
- Frame 对象增加`set.property()`、`set.style()`、`link`
- 元素对象增加`get_frame()`方法
- 所有对象增加`find()`方法，用于同时匹配多个定位符
- `quit()`增加`del_data`参数
- Tab 对象的`close()`方法增加`others`参数
- `cookies()`删除`as_dict`参数，增加`as_dict()`、`as_json`和`as_str()`方法
- 浏览器页面和元素对象的`s_ele()`和`s_eles()`方法增加`tiemout`参数
- 浏览器页面和元素对象增加`rect.scroll_position`属性
- 动作链删除`db_click()`，各点击方法增加`times`参数
- `wait.new_tab()`增加`curr_tab`参数
- 滚动增加`scroll()`方法
- 部分等待方法会返回调用者，方便链式操作
- `ChromiumOptions`增加`new_env()`方法，ini 文件增加`new_env`参数，用于指定必须用新环境
- `ChromiumOptions`增加`is_headless`属性
- `parent()`和 shadow-root 内查找方法增加`timeout`参数
- 元素对象各种动作返回元素本身，便于链式操作
- 元素对象增加`timeout`属性
- 页面对象增加`console`属性，可读取控制台信息
- 打印`NoneElement`改成详细信息
- `wait.alert_closed()`增加`timeout`参数
- `auto_port()`方法删除`tmp_path`参数
- `src()`方法可获取`<link>`指向的文件内容
- 录像改为 H.265 编码
- `shadow_root`属性增加等待附加到元素（超时 10 秒）
- `set.cookies()`忽略过期 cookie
- `ChromiumFrame`对象默认改为单例
- `timeout`属性不再接受赋值
- 优化连接浏览器失败报错
- 优化`css_path`
- 修复`new_tab()`在访客模式和隐私模式的问题
- 修复 Frame 对象滚动填入`tuple`定位符报错问题
- 修复`states.is_displayed`有些情况下不正确问题
- 修复元素`link`属性不正确的问题
- 修复 shadow-root 内用 css 找元素的一个问题
- 修复异域`<iframe>`内元素屏幕坐标不准问题
- 修复`new_tab=True`时下载路径不正确问题
- 修复`attr()`填入大写字母无法获取问题
